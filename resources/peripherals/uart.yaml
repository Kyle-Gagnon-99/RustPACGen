# yaml-language-server: $schema=../../board-peripheral-schema.json

peripheral:
  name: "UART"
  description: "Universal Asynchronous Receiver/Transmitter"
  version: "1.0.0"
  base_address: 0xE0000000
  interrupt: 0

  registers:
    - friendly_name: "Control Register"
      name: "CR"
      offset: 0x0
      size: 32
      access: "RW"
      reset: 0x0000_0128
      fields:
        - name: "SW_RST_RX_DATA_PATH"
          bit_range: "0"
          access: "RW"
          description: "Software reset for RX data path"
          value_description:
            0: "No action"
            1: "Reset RX data path"
        - name: "SW_RST_TX_DATA_PATH"
          bit_range: "1"
          access: "RW"
          description: "Software reset for TX data path"
          value_description:
            0: "No action"
            1: "Reset TX data path"
        - name: "RX_ENABLE"
          bit_range: "4"
          access: "RW"
          description: "Enable RX"
          value_description:
            0: "Disable RX"
            1: "Enable RX"
        - name: "RX_DISABLE"
          bit_range: "5"
          access: "RW"
          description: "Disable RX"
          value_description:
            0: "Enable RX"
            1: "Disable RX"
        - name: "TX_ENABLE"
          bit_range: "6"
          access: "RW"
          description: "Enable TX"
          value_description:
            0: "Disable TX"
            1: "Enable TX"
        - name: "TX_DISABLE"
          bit_range: "7"
          access: "RW"
          description: "Disable TX"
          value_description:
            0: "Enable TX"
            1: "Disable TX"
        - name: "RX_RESET_TIMEOUT_COUNTER"
          bit_range: "8"
          access: "RW"
          description: "Reset RX timeout counter"
          value_description:
            0: "No action"
            1: "Reset RX timeout counter"
        - name: "START_TX_BREAK"
          bit_range: "9"
          access: "RW"
          description: "Start transmitter break"
          value_description:
            0: "No effect"
            1: "Start to transmit a break after the characters currently present in the FIFO and the transmit shift register have been transmitted. It can only be set if STPBRK (Stop transmitter break) is not high"
        - name: "STOP_TX_BREAK"
          bit_range: "10"
          access: "RW"
          description: "Stop transmitter break"
          value_description:
            0: "No effect"
            1: "stop transmission of the break after a minimum of one character length and transmit a high level during 12 bit periods. It can be set regardless of the value of STTBRK."
    - friendly_name: "Mode Register"
      name: "MR"
      offset: 0x4
      size: 32
      access: "RW"
      fields:
        - name: "CLOCK_SOURCE_SELECT"
          bit_range: "0"
          access: "RW"
          description: "This field defines whether a pre-scalar of 8 is applied to the baud rate generator input clock"
          value_description:
            0: "Clock source is uart_ref_clk"
            1: "Clock source is uart_ref_clk divided by 8"
        - name: "CHAR_LEN_SELECT"
          bit_range: "1..2"
          access: "RW"
          description: "Character length select"
          enums:
            - name: "EightBits"
              value: "0b0X"
              description: "Eight bits"
            - name: "SevenBits"
              value: "0b10"
              description: "Seven bits"
            - name: "SixBits"
              value: "0b11"
              description: "Six bits"
        - name: "PARITY_TYPE_SELECT"
          bit_range: "3..5"
          access: "RW"
          description: "Parity type select"
          enums:
            - name: "EvenParity"
              value: "0b000"
              description: "Even parity"
            - name: "OddParity"
              value: "0b001"
              description: "Odd parity"
            - name: "SpaceParity"
              value: "0b010"
              description: "Forced to 0 parity (Space parity)"
            - name: "MarkParity"
              value: "0b011"
              description: "Forced to 1 parity (Mark parity)"
            - name: "NoParity"
              value: "0b1XX"
              description: "No parity"
        - name: "NUM_STOP_BITS"
          bit_range: "6..7"
          description: "Number of stop bits: Defines the number of stop bits to detect on receive and to generate on transmit."
          access: "RW"
          enums:
            - name: "OneStopBit"
              value: "0b00"
              description: "One stop bit"
            - name: "OneAndAHalfStopBits"
              value: "0b01"
              description: "One and a half stop bits"
            - name: "TwoStopBits"
              value: "0b10"
              description: "Two stop bits"
            - name: "Reserved"
              value: "0b11"
              description: "Reserved"
        - name: "CHANNEL_MODE"
          bit_range: "8..9"
          access: "RW"
          description: "Channel mode"
          enums:
            - name: "NormalMode"
              value: "0b00"
              description: "Normal mode"
            - name: "AutoEchoMode"
              value: "0b01"
              description: "Automatic echo mode"
            - name: "LocalLoopbackMode"
              value: "0b10"
              description: "Local loopback mode"
            - name: "RemoteLoopbackMode"
              value: "0b11"
              description: "Remote loopback mode"
    - friendly_name: "Interrupt Enable Register"
      name: "IER"
      offset: 0x8
      size: 32
      access: "W"
      fields:
        - name: "TOVR"
          bit_range: "12"
          access: "W"
          description: "Transmitter FIFO Overflow interrupt"
          value_description:
            0: "No affect"
            1: "Enable (clears mask = 0)"
        - name: "TNFUL"
          bit_range: "11"
          access: "W"
          description: "Transmitter FIFO Nearly Full interrupt"
          value_description:
            0: "No affect"
            1: "Enable (clears mask = 0)"
        - name: "TTRIG"
          bit_range: "10"
          access: "W"
          description: "Transmitter FIFO Trigger interrupt"
          value_description:
            0: "Disable"
            1: "Enable"
        - name: "XUARTPS_IXR_DMS"
          bit_range: "9"
          access: "W"
          description: "Delta Modem Status Indicator interrupt"
          value_description:
            0: "No affect"
            1: "Enable (clears mask = 0)"
        - name: "XUARTPS_IXR_TOUT"
          bit_range: "8"
          access: "W"
          description: "Receiver Timeout Error interrupt"
          value_description:
            0: "No affect"
            1: "Enable (clears mask = 0)"
        - name: "XUARTPS_IXR_PARITY"
          bit_range: "7"
          access: "W"
          description: "Receiver Parity Error interrupt"
          value_description:
            0: "Disable"
            1: "Enable"
        - name: "XUARTPS_IXR_FRAMING"
          bit_range: "6"
          access: "W"
          description: "Receiver Framing Error interrupt"
          value_description:
            0: "No affect"
            1: "Enable (clears mask = 0)"
        - name: "XUARTPS_IXR_OVER"
          bit_range: "5"
          access: "W"
          description: "Receiver Overflow Error interrupt"
          value_description:
            0: "No affect"
            1: "Enable (clears mask = 0)"
        - name: "XUARTPS_IXR_TXFULL"
          bit_range: "4"
          access: "W"
          description: "Transmitter FIFO Full interrupt"
          value_description:
            0: "No affect"
            1: "Enable (clears mask = 0)"
        - name: "XUARTPS_IXR_TXEMPTY"
          bit_range: "3"
          access: "W"
          description: "Transmitter FIFO Empty interrupt"
          value_description:
            0: "Disable"
            1: "Enable"
        - name: "XUARTPS_IXR_RXFULL"
          bit_range: "2"
          access: "W"
          description: "Receiver FIFO Full interrupt"
          value_description:
            0: "No affect"
            1: "Enable (clears mask = 0)"
        - name: "XUARTPS_IXR_RXEMPTY"
          bit_range: "1"
          access: "W"
          description: "Receiver FIFO Empty interrupt"
          value_description:
            0: "No affect"
            1: "Enable (clears mask = 0)"
        - name: "XUARTPS_IXR_RXOVR"
          bit_range: "0"
          access: "W"
          description: "Receiver FIFO Trigger interrupt"
          value_description:
            0: "No affect"
            1: "Enable (clears mask = 0)"
